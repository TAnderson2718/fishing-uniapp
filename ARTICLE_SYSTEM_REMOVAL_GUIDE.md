# Articleç³»ç»Ÿç§»é™¤å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ ç§»é™¤æ¦‚è¿°

å·²æˆåŠŸç§»é™¤Articleç³»ç»Ÿï¼Œç»Ÿä¸€ä½¿ç”¨Newsç³»ç»Ÿç®¡ç†èµ„è®¯å†…å®¹ã€‚è¿™è§£å†³äº†ä¹‹å‰ç®¡ç†ç«¯å’Œå®¢æˆ·ç«¯æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åç«¯ä»£ç æ¸…ç†
- âœ… åˆ é™¤ `services/api/src/articles/` æ•´ä¸ªç›®å½•
- âœ… ä» `app.module.ts` ä¸­ç§»é™¤ `ArticlesModule` å¯¼å…¥å’Œæ³¨å†Œ
- âœ… ä» `prisma/schema.prisma` ä¸­ç§»é™¤ï¼š
  - `Article` æ¨¡å‹
  - `ArticleImage` æ¨¡å‹  
  - `ArticleStatus` æšä¸¾

### 2. å‰ç«¯ä»£ç æ›´æ–°
- âœ… ä»å°ç¨‹åºAPIé…ç½®ä¸­ç§»é™¤ `ARTICLES` ç«¯ç‚¹
- âœ… æ›´æ–°æ–‡ç« è¯¦æƒ…é¡µè°ƒç”¨ `/news/public/${id}` æ¥å£
- âœ… è°ƒæ•´è¯¦æƒ…é¡µæ¨¡æ¿é€‚é…Newsæ•°æ®ç»“æ„
- âœ… ç§»é™¤æµ‹è¯•é¡µé¢ä¸­çš„Article APIæµ‹è¯•
- âœ… æ›´æ–°TypeScriptç±»å‹å®šä¹‰

### 3. æ•°æ®åº“è¿ç§»å‡†å¤‡
- âœ… åˆ›å»ºè¿ç§»è„šæœ¬ `services/api/migrations/remove-article-system.sql`
- âœ… æ¸…ç†ç§å­æ•°æ®è„šæœ¬ä¸­çš„Articleåˆ›å»ºä»£ç 

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **å¤‡ä»½æ•°æ®åº“**ï¼ˆé‡è¦ï¼ï¼‰
```bash
cd /var/www/fishing/services/api
sudo -u postgres pg_dump fishing_db > backup_before_article_removal_$(date +%Y%m%d_%H%M%S).sql
```

2. **æ‹‰å–æœ€æ–°ä»£ç **
```bash
cd /var/www/fishing
git pull origin main
```

3. **å®‰è£…ä¾èµ–**
```bash
cd services/api
npm install
```

4. **æ‰§è¡Œæ•°æ®åº“è¿ç§»**
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨å‡†å¤‡å¥½çš„SQLè„šæœ¬
sudo -u postgres psql fishing_db < migrations/remove-article-system.sql

# æ–¹æ³•2ï¼šä½¿ç”¨Prismaè¿ç§»ï¼ˆå¦‚æœæ•°æ®åº“è¿æ¥æ­£å¸¸ï¼‰
npx prisma migrate dev --name remove-article-system
```

5. **é‡å¯æœåŠ¡**
```bash
pm2 restart fishing-api
```

6. **éªŒè¯åŠŸèƒ½**
- æ£€æŸ¥ç®¡ç†ç«¯æ–°é—»ç®¡ç†åŠŸèƒ½
- æ£€æŸ¥å°ç¨‹åºèµ„è®¯æ˜¾ç¤ºå’Œè¯¦æƒ…é¡µ
- ç¡®è®¤APIæ¥å£æ­£å¸¸å“åº”

## ğŸ”§ æ¶æ„å˜æ›´è¯´æ˜

### ä¹‹å‰çš„é—®é¢˜
- **ç®¡ç†ç«¯**ï¼šä½¿ç”¨Newsç³»ç»Ÿç®¡ç†èµ„è®¯
- **å®¢æˆ·ç«¯é¦–é¡µ**ï¼šè°ƒç”¨ `/news/public` è·å–èµ„è®¯åˆ—è¡¨
- **å®¢æˆ·ç«¯è¯¦æƒ…é¡µ**ï¼šè°ƒç”¨ `/articles/${id}` è·å–è¯¦æƒ…ï¼ˆâŒ æ•°æ®ä¸åŒ¹é…ï¼‰

### ä¿®å¤åçš„æ¶æ„
- **ç®¡ç†ç«¯**ï¼šä½¿ç”¨Newsç³»ç»Ÿç®¡ç†èµ„è®¯
- **å®¢æˆ·ç«¯é¦–é¡µ**ï¼šè°ƒç”¨ `/news/public` è·å–èµ„è®¯åˆ—è¡¨  
- **å®¢æˆ·ç«¯è¯¦æƒ…é¡µ**ï¼šè°ƒç”¨ `/news/public/${id}` è·å–è¯¦æƒ…ï¼ˆâœ… æ•°æ®ä¸€è‡´ï¼‰

## ğŸ“Š æ•°æ®ç»“æ„å¯¹æ¯”

### Articleæ¨¡å‹ï¼ˆå·²ç§»é™¤ï¼‰
```typescript
{
  id, title, summary, content, coverImage, 
  status, publishedAt, viewCount, sortOrder,
  createdAt, updatedAt, images[]
}
```

### Newsæ¨¡å‹ï¼ˆç»Ÿä¸€ä½¿ç”¨ï¼‰
```typescript
{
  id, title, content, author,
  status, publishedAt, createdAt, updatedAt
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸¢å¤±**ï¼šArticleè¡¨ä¸­çš„æ•°æ®å°†è¢«åˆ é™¤ï¼Œå¦‚éœ€ä¿ç•™è¯·å…ˆè¿ç§»åˆ°Newsè¡¨
2. **åŠŸèƒ½å·®å¼‚**ï¼šNewsç³»ç»Ÿä¸æ”¯æŒå›¾ç‰‡ç®¡ç†ã€æµè§ˆé‡ç»Ÿè®¡ç­‰ArticleåŠŸèƒ½
3. **å‰ç«¯é€‚é…**ï¼šè¯¦æƒ…é¡µæ¨¡æ¿å·²è°ƒæ•´ä¸ºNewsæ•°æ®ç»“æ„
4. **è½®æ’­å›¾é“¾æ¥**ï¼šå¦‚æœ‰è½®æ’­å›¾é“¾æ¥åˆ°Articleï¼Œéœ€è¦æ›´æ–°ä¸ºNews ID

## ğŸ¯ éªŒè¯æ¸…å•

- [ ] ç®¡ç†ç«¯å¯ä»¥æ­£å¸¸åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ–°é—»
- [ ] å°ç¨‹åºé¦–é¡µæ­£å¸¸æ˜¾ç¤ºèµ„è®¯åˆ—è¡¨
- [ ] ç‚¹å‡»èµ„è®¯å¯ä»¥æ­£å¸¸è¿›å…¥è¯¦æƒ…é¡µ
- [ ] è¯¦æƒ…é¡µæ­£å¸¸æ˜¾ç¤ºæ–°é—»å†…å®¹
- [ ] APIæ¥å£è¿”å›æ­£ç¡®çš„æ•°æ®æ ¼å¼
- [ ] æ•°æ®åº“ä¸­Articleç›¸å…³è¡¨å·²åˆ é™¤

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨æ—¥å¿—ï¼š`pm2 logs fishing-api`
2. æ•°æ®åº“è¿æ¥ï¼š`sudo -u postgres psql fishing_db`
3. APIæ¥å£æµ‹è¯•ï¼š`curl http://localhost:3000/news/public`
